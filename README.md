# Telegram и VK боты для проведения викторины

Проект представляет [Telegram-бота](t.me/Histiory_Test_bot) и [VK-бота](https://vk.com/public216858890), проводящих викторину по истории.

## Описание

Представленные боты - это пример разработки ботов, взаимодействующих с пользователем в Telegram и ВКонтакте. Особенностью ботов является то, что для запоминания того, на каком этапе находится диалог с конкретным пользователем, они используют [Redis](https://app.redislabs.com/).

Боты используют вопросы и ответы из json-файлов. Формат файлов можно посмотреть в папке `quiz_questions/`.

В случае, если в процессе работы бота произошла ошибка, он отправляет в Telegram сообщение модератору о необходимости вмешательства.

По ссылкам вы можете протестировать работу [Telegram-бота](t.me/Histiory_Test_bot) и [VK-бота](https://vk.com/public216858890).

## Самостоятельное использование ботов

### Как установить

Для запуска ботов вам понадобится Python версии 3.8.

Скачайте код с GitHub.

Создайте виртуальное окружение и активируйте его:
```
python -m venv venv
cd venv/Scripts
activate
cd ../..
```

Установите зависимости с помощью `pip` (или `pip3`, есть конфликт с Python2):
```
pip install -r requirements.txt
```

### Переменные окружения

Часть настроек утилит берётся из переменных окружения. Чтобы их определить, создайте файл `.env` в той же папке, где и скрипты, и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступно 6 обязательных переменных:

- `TELEGRAM_BOT_TOKEN` - API-токен Telegram-бота, с помощью которого будет осуществляться отправка уведомлений. Если такого telegram-бота пока нет, [создайте его](https://way23.ru/регистрация-бота-в-telegram.html).
- `TELEGRAM_MODERATOR_CHAT_ID` - ID чата модератора ботов, в который боты присылают сообщения об ошибках.
- `VK_GROUP_TOKEN` - API-токен группы ВКонтакте. Чтобы получить этот токен, нужно [Создать группу ВКонтакте](https://vk.com/groups?tab=admin), разрешить боту отправлять сообщения от имени группы и получить токен в меню "Работа с API" ВКонтакте.
- `REDIS_DB_HOST`, `REDIS_DB_PORT` и `REDIS_DB_PASSWORD` - хост, порт и пароль базы данных Redis, которые можно получить, зарегистрировавшись по [ссылке](https://app.redislabs.com/).

Пример содержимого файла .env:
```
#
TELEGRAM_BOT_TOKEN=958423683:AAEAtJ5Lde5YYfkjergber
TELEGRAM_MODERATOR_CHAT_ID=12345
VK_GROUP_TOKEN=vk1.HJKJJK89479shghadosAHKLkhdkhuch654758GHKFHHKgk848
REDIS_DB_HOST=redis-12345.c123.eu-central-1-1.ec1.cloud.redislabs.com
REDIS_DB_PORT=12345
REDIS_DB_PASSWORD=h5269869uigxgKIJFRD4747
```

### Как запустить

Для запуска каждого из ботов откройте консоль `cmd` и наберите в командной строке соответствующую боту команду:
```
python telegram_bot.py
python vk_bot.py
```

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
